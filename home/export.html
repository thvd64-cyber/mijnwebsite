xport<!-- ======================= home/export.html ======================= -->
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8"> <!-- Tekencodering UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsief op mobiel/tablet/desktop -->
    <title>MyFamTreeCollab - Layout1</title> <!-- ⚠️ Browser tab titel -->
    <link rel="stylesheet" href="../css/style.css"> <!-- Verbindt de externe CSS voor volledige styling -->
</head>
<body>
<!-- ======================= layout/TopBar.html ======================= -->

<!-- Placeholder waar de TopBar.html inhoud wordt ingeladen -->
<div id="topbar-placeholder"></div>  <!-- container voor TopBar content -->

<script>
fetch('/MyFamTreeCollab/Layout/TopBar.html')  // Haalt TopBar HTML op
    .then(resp => resp.text())                // lees de inhoud van het bestand Converteert response naar tekst
    .then(data => {                           // werk met de opgehaalde HTML data
        document.getElementById('topbar-placeholder').innerHTML = data;  // plaats de TopBar HTML in de placeholder
    });
</script>
<!-- ======================= layout/Navbar.html ======================= -->
<div id="Navbar-placeholder"></div> <!-- plek waar Navbar komt -->

<script>
fetch('/MyFamTreeCollab/Layout/Navbar.html') // Navbar bestand ophalen
    .then(resp => resp.text())               // omzetten naar HTML tekst
    .then(data => {
        const placeholder = document.getElementById('Navbar-placeholder'); // placeholder ophalen
        if (placeholder) {                   // controleren of element bestaat
            placeholder.innerHTML = data;    // Navbar injecteren
        } else {
            console.error('Navbar-placeholder niet gevonden'); // Debugmelding
        }
    });
</script>

<!-- ======================= Hoofd pagina ======================= -->
<!-- ======================= Pagina Titel Manueel ======================= -->
<div id="pageTitle" style="font-size:1.5rem; font-weight:bold; margin-bottom:15px;"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const pageTitleDiv = document.getElementById('pageTitle');  // Doel div
    const title = "Export";            // ⚠️ Zelf invullen title
    pageTitleDiv.textContent = title
        .replace(/[-_]/g,' ')          // underscore/koppelteken → spatie
        .replace(/\b\w/g, c => c.toUpperCase()); // eerste letter hoofdletter
});
</script>
<!-- ======================= MAIN CONTENT ======================= -->
<main>
    <div class="container">
        <button id="exportBtn">Exporteer CSV</button>
        <p id="exportStatus"></p>
    </div>
</main>

<!-- ======================= EXPORT JS ======================= -->
<script>
const exportBtn = document.getElementById('exportBtn');
const exportStatus = document.getElementById('exportStatus');

exportBtn.addEventListener('click', function() {
    let data = JSON.parse(localStorage.getItem('stamboomData') || '[]');

    if (data.length === 0) {
        exportStatus.textContent = "⚠️ Geen personen gevonden om te exporteren.";
        return;
    }

    const columns = ["ID","Doopnaam","Roepnaam","Prefix","Achternaam","Geslacht","Geboortedatum","Geboorteplaats","Overlijdensdatum","Overlijdensplaats","Vader","MoederID","PartnerID","Huwelijksdatum","Huwelijksplaats","Opmerkingen","Adres","ContactInfo","URL"];

    let csvContent = columns.join(",") + "\n";
    data.forEach(person => {
        const row = columns.map(col => {
            let value = person[col] || "";
            if (value.includes(",")) value = `"${value}"`;
            return value;
        }).join(",");
        csvContent += row + "\n";
    });

    const now = new Date();
    const timestamp = now.toISOString().replace(/[:.]/g,"-");
    const filename = `Stamboom_${timestamp}.csv`;

    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = filename;
    link.style.display = "none";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    exportStatus.textContent = `✅ Export succesvol: ${data.length} personen in ${filename}`;
});
</script>
  <!-- ======================= layout/Footer.html ======================= -->
<div id="footer-placeholder"></div>  <!-- Doel: container voor Footer content -->

<script>
fetch('/MyFamTreeCollab/Layout/Footer.html')  // pad naar de layout/Footer.html
    .then(resp => resp.text())                // response omzetten naar leesbare HTML
    .then(data => {                           // werk met de opgehaalde HTML
        document.getElementById('footer-placeholder').innerHTML = data; // Footer injecteren
    });
</script>
</body>
</html>
