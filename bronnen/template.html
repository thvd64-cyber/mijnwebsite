<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>CSV Template - MyFamTreeCollab</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<header>
    <h1>CSV Template</h1>
    <p>Gebruik deze downloadbare CSV om stamboomdata te importeren in MyFamTreeCollab. 
       Alle kolomnamen worden herkend en het template is volledig conform het huidige schema. 
       ID’s volgen de idGenerator-logica.</p>
</header>

<main>
    <!-- Hard-coded voorbeeldrecord alleen ter referentie op de pagina -->
    <section>
        <h2>Voorbeeldrecord (alleen visueel)</h2>
        <p>
            ID: JJVMMHoofdID | Doopnaam: Jan | Roepnaam: Jan | Geslacht: M | Geboortedatum: 1980-01-01 | 
            Geboorteplaats: Amsterdam | PartnerID: (leeg)
        </p>
    </section>

    <!-- Download button -->
    <button id="downloadBtn">Download CSV Voorbeeld</button>
    <p id="status"></p>
</main>

<footer>
    <p>&copy; 2026 MyFamTreeCollab website</p>
</footer>

<script>
const downloadBtn = document.getElementById('downloadBtn');
const status = document.getElementById('status');

// Functie genereert CSV met headers + 2 lege rijen
downloadBtn.addEventListener('click', () => {
    if (!window.StamboomSchema) {
        status.textContent = "❌ Fout: StamboomSchema niet geladen.";
        return;
    }

    // Headers ophalen uit schema
    const headers = StamboomSchema.header();
    // 2 lege rijen genereren
    const emptyRow = Array(StamboomSchema.count()).fill("").join(",");
    const csvContent = `${headers}\n${emptyRow}\n${emptyRow}`;

    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "Stamboom_template.csv";
    link.style.display = "none";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    status.textContent = "✅ CSV template succesvol gedownload!";
});
</script>

</body>
</html>
